"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_albeavi_Documents_Programming_Denarii_denarii_mvp_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\albeavi\\\\Documents\\\\Programming\\\\Denarii\\\\denarii-mvp\\\\src\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_albeavi_Documents_Programming_Denarii_denarii_mvp_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhbGJlYXZpJTVDRG9jdW1lbnRzJTVDUHJvZ3JhbW1pbmclNUNEZW5hcmlpJTVDZGVuYXJpaS1tdnAlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2FsYmVhdmklNUNEb2N1bWVudHMlNUNQcm9ncmFtbWluZyU1Q0RlbmFyaWklNUNkZW5hcmlpLW12cCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrQztBQUM1SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haS1maXJlYmFzZS1jaGF0Ym90Lz8zMjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGFsYmVhdmlcXFxcRG9jdW1lbnRzXFxcXFByb2dyYW1taW5nXFxcXERlbmFyaWlcXFxcZGVuYXJpaS1tdnBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxhbGJlYXZpXFxcXERvY3VtZW50c1xcXFxQcm9ncmFtbWluZ1xcXFxEZW5hcmlpXFxcXGRlbmFyaWktbXZwXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(rsc)/./src/types/index.ts\");\n/* harmony import */ var _lib_openai_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/openai-config */ \"(rsc)/./src/lib/openai-config.ts\");\n\n\n\n\n// Function to create OpenAI client when needed\nfunction createOpenAIClient() {\n    return new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        apiKey: process.env.OPENAI_API_KEY\n    });\n}\nasync function POST(request) {\n    try {\n        // Log environment info in development for debugging\n        const currentEnv = (0,_lib_openai_config__WEBPACK_IMPORTED_MODULE_3__.getCurrentEnvironment)();\n        if (currentEnv === \"development\") {\n            (0,_lib_openai_config__WEBPACK_IMPORTED_MODULE_3__.logEnvironmentInfo)();\n        }\n        // Validate environment variables\n        const envValidation = (0,_lib_openai_config__WEBPACK_IMPORTED_MODULE_3__.validateEnvironment)();\n        if (!envValidation.isValid) {\n            console.error(\"Environment validation failed:\", envValidation.error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Server configuration error. Please contact support.\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.API_ERROR\n            }, {\n                status: 500\n            });\n        }\n        // Log warnings if any (in development only)\n        if (envValidation.warnings && currentEnv === \"development\") {\n            envValidation.warnings.forEach((warning)=>{\n                console.warn(\"Environment warning:\", warning);\n            });\n        }\n        // Get OpenAI configuration\n        const config = (0,_lib_openai_config__WEBPACK_IMPORTED_MODULE_3__.getOpenAIConfig)();\n        // Parse and validate request body\n        let body;\n        try {\n            body = await request.json();\n        } catch (error) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid request format\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.VALIDATION_ERROR\n            }, {\n                status: 400\n            });\n        }\n        // Validate required fields\n        if (!body.message || typeof body.message !== \"string\" || body.message.trim().length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Message is required and cannot be empty\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.VALIDATION_ERROR\n            }, {\n                status: 400\n            });\n        }\n        // Validate conversation history if provided\n        if (body.conversationHistory && !Array.isArray(body.conversationHistory)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Conversation history must be an array\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.VALIDATION_ERROR\n            }, {\n                status: 400\n            });\n        }\n        // Build messages array for OpenAI API\n        const messages = [];\n        // Add conversation history if provided\n        if (body.conversationHistory && body.conversationHistory.length > 0) {\n            for (const historyMessage of body.conversationHistory){\n                if (historyMessage.role && historyMessage.content) {\n                    messages.push({\n                        role: historyMessage.role,\n                        content: historyMessage.content\n                    });\n                }\n            }\n        }\n        // Add current user message\n        messages.push({\n            role: \"user\",\n            content: body.message.trim()\n        });\n        // Create OpenAI client and make request\n        const openai = createOpenAIClient();\n        const completion = await openai.chat.completions.create({\n            model: config.model,\n            messages: messages,\n            temperature: config.temperature,\n            max_tokens: config.maxTokens\n        });\n        // Extract response from OpenAI\n        const assistantMessage = completion.choices[0]?.message?.content;\n        if (!assistantMessage) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"No response received from AI service\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.API_ERROR\n            }, {\n                status: 500\n            });\n        }\n        // Return successful response\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            response: assistantMessage\n        });\n    } catch (error) {\n        console.error(\"OpenAI API error:\", error);\n        // Handle specific OpenAI errors\n        if (error?.status === 429) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Too many requests. Please wait a moment and try again.\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.RATE_LIMIT_ERROR\n            }, {\n                status: 429\n            });\n        }\n        if (error?.status === 401) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authentication failed. Please contact support.\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.API_ERROR\n            }, {\n                status: 500\n            });\n        }\n        if (error?.status >= 400 && error?.status < 500) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid request to AI service\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.VALIDATION_ERROR\n            }, {\n                status: 400\n            });\n        }\n        // Handle network/connection errors\n        if (error?.code === \"ENOTFOUND\" || error?.code === \"ECONNREFUSED\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unable to connect to AI service. Please check your connection.\",\n                errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.NETWORK_ERROR\n            }, {\n                status: 503\n            });\n        }\n        // Generic error fallback\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"An unexpected error occurred. Please try again.\",\n            errorType: _types__WEBPACK_IMPORTED_MODULE_2__.ErrorType.API_ERROR\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDQTtnQkFBRVAsUUFBUTtZQUFJO1FBRWxCO1FBRUEsbUNBQW1DO1FBQ25DLElBQUlKLE9BQU9vQyxTQUFTLGVBQWVwQyxPQUFPb0MsU0FBUyxnQkFBZ0I7WUFDakUsT0FBT3RELGtGQUFZQSxDQUFDbUIsSUFBSSxDQUN0QjtnQkFDRUQsT0FBTztnQkFDUEUsV0FBV2xCLDZDQUFTQSxDQUFDcUQsYUFBYTtZQUNwQyxHQUNBO2dCQUFFakMsUUFBUTtZQUFJO1FBRWxCO1FBRUEseUJBQXlCO1FBQ3pCLE9BQU90QixrRkFBWUEsQ0FBQ21CLElBQUksQ0FDdEI7WUFDRUQsT0FBTztZQUNQRSxXQUFXbEIsNkNBQVNBLENBQUNtQixTQUFTO1FBQ2hDLEdBQ0E7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuYWktZmlyZWJhc2UtY2hhdGJvdC8uL3NyYy9hcHAvYXBpL2NoYXQvcm91dGUudHM/NDZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XHJcbmltcG9ydCB7IEVycm9yVHlwZSB9IGZyb20gJ0AvdHlwZXMnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZUVudmlyb25tZW50LCBnZXRPcGVuQUlDb25maWcsIGxvZ0Vudmlyb25tZW50SW5mbywgZ2V0Q3VycmVudEVudmlyb25tZW50IH0gZnJvbSAnQC9saWIvb3BlbmFpLWNvbmZpZyc7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgT3BlbkFJIGNsaWVudCB3aGVuIG5lZWRlZFxyXG5mdW5jdGlvbiBjcmVhdGVPcGVuQUlDbGllbnQoKTogT3BlbkFJIHtcclxuICByZXR1cm4gbmV3IE9wZW5BSSh7XHJcbiAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBSZXF1ZXN0IGludGVyZmFjZSBmb3IgdHlwZSBzYWZldHlcclxuaW50ZXJmYWNlIENoYXRSZXF1ZXN0IHtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgY29udmVyc2F0aW9uSGlzdG9yeT86IEFycmF5PHtcclxuICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG4gIH0+O1xyXG59XHJcblxyXG4vLyBSZXNwb25zZSBpbnRlcmZhY2UgZm9yIHR5cGUgc2FmZXR5XHJcbmludGVyZmFjZSBDaGF0UmVzcG9uc2Uge1xyXG4gIHJlc3BvbnNlPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG4gIGVycm9yVHlwZT86IEVycm9yVHlwZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPE5leHRSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIExvZyBlbnZpcm9ubWVudCBpbmZvIGluIGRldmVsb3BtZW50IGZvciBkZWJ1Z2dpbmdcclxuICAgIGNvbnN0IGN1cnJlbnRFbnYgPSBnZXRDdXJyZW50RW52aXJvbm1lbnQoKTtcclxuICAgIGlmIChjdXJyZW50RW52ID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGxvZ0Vudmlyb25tZW50SW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG4gICAgY29uc3QgZW52VmFsaWRhdGlvbiA9IHZhbGlkYXRlRW52aXJvbm1lbnQoKTtcclxuICAgIGlmICghZW52VmFsaWRhdGlvbi5pc1ZhbGlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkOicsIGVudlZhbGlkYXRpb24uZXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnU2VydmVyIGNvbmZpZ3VyYXRpb24gZXJyb3IuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyxcclxuICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLkFQSV9FUlJPUiBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZyB3YXJuaW5ncyBpZiBhbnkgKGluIGRldmVsb3BtZW50IG9ubHkpXHJcbiAgICBpZiAoZW52VmFsaWRhdGlvbi53YXJuaW5ncyAmJiBjdXJyZW50RW52ID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGVudlZhbGlkYXRpb24ud2FybmluZ3MuZm9yRWFjaCh3YXJuaW5nID0+IHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0Vudmlyb25tZW50IHdhcm5pbmc6Jywgd2FybmluZyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBPcGVuQUkgY29uZmlndXJhdGlvblxyXG4gICAgY29uc3QgY29uZmlnID0gZ2V0T3BlbkFJQ29uZmlnKCk7XHJcblxyXG4gICAgLy8gUGFyc2UgYW5kIHZhbGlkYXRlIHJlcXVlc3QgYm9keVxyXG4gICAgbGV0IGJvZHk6IENoYXRSZXF1ZXN0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCBmb3JtYXQnLFxyXG4gICAgICAgICAgZXJyb3JUeXBlOiBFcnJvclR5cGUuVkFMSURBVElPTl9FUlJPUiBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgaWYgKCFib2R5Lm1lc3NhZ2UgfHwgdHlwZW9mIGJvZHkubWVzc2FnZSAhPT0gJ3N0cmluZycgfHwgYm9keS5tZXNzYWdlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICBlcnJvcjogJ01lc3NhZ2UgaXMgcmVxdWlyZWQgYW5kIGNhbm5vdCBiZSBlbXB0eScsXHJcbiAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5WQUxJREFUSU9OX0VSUk9SIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgcHJvdmlkZWRcclxuICAgIGlmIChib2R5LmNvbnZlcnNhdGlvbkhpc3RvcnkgJiYgIUFycmF5LmlzQXJyYXkoYm9keS5jb252ZXJzYXRpb25IaXN0b3J5KSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnQ29udmVyc2F0aW9uIGhpc3RvcnkgbXVzdCBiZSBhbiBhcnJheScsXHJcbiAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5WQUxJREFUSU9OX0VSUk9SIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgbWVzc2FnZXMgYXJyYXkgZm9yIE9wZW5BSSBBUElcclxuICAgIGNvbnN0IG1lc3NhZ2VzOiBPcGVuQUkuQ2hhdC5Db21wbGV0aW9ucy5DaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbVtdID0gW107XHJcbiAgICBcclxuICAgIC8vIEFkZCBjb252ZXJzYXRpb24gaGlzdG9yeSBpZiBwcm92aWRlZFxyXG4gICAgaWYgKGJvZHkuY29udmVyc2F0aW9uSGlzdG9yeSAmJiBib2R5LmNvbnZlcnNhdGlvbkhpc3RvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgICBmb3IgKGNvbnN0IGhpc3RvcnlNZXNzYWdlIG9mIGJvZHkuY29udmVyc2F0aW9uSGlzdG9yeSkge1xyXG4gICAgICAgIGlmIChoaXN0b3J5TWVzc2FnZS5yb2xlICYmIGhpc3RvcnlNZXNzYWdlLmNvbnRlbnQpIHtcclxuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICByb2xlOiBoaXN0b3J5TWVzc2FnZS5yb2xlLFxyXG4gICAgICAgICAgICBjb250ZW50OiBoaXN0b3J5TWVzc2FnZS5jb250ZW50LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFkZCBjdXJyZW50IHVzZXIgbWVzc2FnZVxyXG4gICAgbWVzc2FnZXMucHVzaCh7XHJcbiAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgY29udGVudDogYm9keS5tZXNzYWdlLnRyaW0oKSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENyZWF0ZSBPcGVuQUkgY2xpZW50IGFuZCBtYWtlIHJlcXVlc3RcclxuICAgIGNvbnN0IG9wZW5haSA9IGNyZWF0ZU9wZW5BSUNsaWVudCgpO1xyXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXHJcbiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcclxuICAgICAgdGVtcGVyYXR1cmU6IGNvbmZpZy50ZW1wZXJhdHVyZSxcclxuICAgICAgbWF4X3Rva2VuczogY29uZmlnLm1heFRva2VucyxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEV4dHJhY3QgcmVzcG9uc2UgZnJvbSBPcGVuQUlcclxuICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XHJcbiAgICBcclxuICAgIGlmICghYXNzaXN0YW50TWVzc2FnZSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnTm8gcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSBBSSBzZXJ2aWNlJyxcclxuICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLkFQSV9FUlJPUiBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiBzdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICByZXNwb25zZTogYXNzaXN0YW50TWVzc2FnZSxcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdPcGVuQUkgQVBJIGVycm9yOicsIGVycm9yKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgc3BlY2lmaWMgT3BlbkFJIGVycm9yc1xyXG4gICAgaWYgKGVycm9yPy5zdGF0dXMgPT09IDQyOSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgIGVycm9yOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB3YWl0IGEgbW9tZW50IGFuZCB0cnkgYWdhaW4uJyxcclxuICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLlJBVEVfTElNSVRfRVJST1IgXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDI5IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXJyb3I/LnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyxcclxuICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLkFQSV9FUlJPUiBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlcnJvcj8uc3RhdHVzID49IDQwMCAmJiBlcnJvcj8uc3RhdHVzIDwgNTAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIHJlcXVlc3QgdG8gQUkgc2VydmljZScsXHJcbiAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5WQUxJREFUSU9OX0VSUk9SIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGFuZGxlIG5ldHdvcmsvY29ubmVjdGlvbiBlcnJvcnNcclxuICAgIGlmIChlcnJvcj8uY29kZSA9PT0gJ0VOT1RGT1VORCcgfHwgZXJyb3I/LmNvZGUgPT09ICdFQ09OTlJFRlVTRUQnKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgZXJyb3I6ICdVbmFibGUgdG8gY29ubmVjdCB0byBBSSBzZXJ2aWNlLiBQbGVhc2UgY2hlY2sgeW91ciBjb25uZWN0aW9uLicsXHJcbiAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5ORVRXT1JLX0VSUk9SIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJpYyBlcnJvciBmYWxsYmFja1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxyXG4gICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLkFQSV9FUlJPUiBcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJPcGVuQUkiLCJFcnJvclR5cGUiLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwiZ2V0T3BlbkFJQ29uZmlnIiwibG9nRW52aXJvbm1lbnRJbmZvIiwiZ2V0Q3VycmVudEVudmlyb25tZW50IiwiY3JlYXRlT3BlbkFJQ2xpZW50IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiUE9TVCIsInJlcXVlc3QiLCJjdXJyZW50RW52IiwiZW52VmFsaWRhdGlvbiIsImlzVmFsaWQiLCJjb25zb2xlIiwiZXJyb3IiLCJqc29uIiwiZXJyb3JUeXBlIiwiQVBJX0VSUk9SIiwic3RhdHVzIiwid2FybmluZ3MiLCJmb3JFYWNoIiwid2FybmluZyIsIndhcm4iLCJjb25maWciLCJib2R5IiwiVkFMSURBVElPTl9FUlJPUiIsIm1lc3NhZ2UiLCJ0cmltIiwibGVuZ3RoIiwiY29udmVyc2F0aW9uSGlzdG9yeSIsIkFycmF5IiwiaXNBcnJheSIsIm1lc3NhZ2VzIiwiaGlzdG9yeU1lc3NhZ2UiLCJyb2xlIiwiY29udGVudCIsInB1c2giLCJvcGVuYWkiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJtYXhUb2tlbnMiLCJhc3Npc3RhbnRNZXNzYWdlIiwiY2hvaWNlcyIsInJlc3BvbnNlIiwiUkFURV9MSU1JVF9FUlJPUiIsImNvZGUiLCJORVRXT1JLX0VSUk9SIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openai-config.ts":
/*!**********************************!*\
  !*** ./src/lib/openai-config.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_OPENAI_CONFIG: () => (/* binding */ DEFAULT_OPENAI_CONFIG),\n/* harmony export */   getCurrentEnvironment: () => (/* binding */ getCurrentEnvironment),\n/* harmony export */   getOpenAIConfig: () => (/* binding */ getOpenAIConfig),\n/* harmony export */   logEnvironmentInfo: () => (/* binding */ logEnvironmentInfo),\n/* harmony export */   validateEnvironment: () => (/* binding */ validateEnvironment)\n/* harmony export */ });\n/**\r\n * Default OpenAI configuration settings by environment\r\n */ const DEFAULT_OPENAI_CONFIG = {\n    development: {\n        model: \"gpt-3.5-turbo\",\n        temperature: 0.7,\n        maxTokens: 150\n    },\n    production: {\n        model: \"gpt-3.5-turbo\",\n        temperature: 0.5,\n        maxTokens: 200\n    },\n    test: {\n        model: \"gpt-3.5-turbo\",\n        temperature: 0.1,\n        maxTokens: 50\n    }\n};\n/**\r\n * Gets the current environment\r\n */ function getCurrentEnvironment() {\n    const env = \"development\";\n    if (env === \"production\") return \"production\";\n    if (env === \"test\") return \"test\";\n    return \"development\";\n}\n/**\r\n * Validates that required environment variables are present and properly formatted\r\n */ function validateEnvironment() {\n    const warnings = [];\n    // Check required environment variables\n    if (!process.env.OPENAI_API_KEY) {\n        return {\n            isValid: false,\n            error: \"OPENAI_API_KEY environment variable is required\"\n        };\n    }\n    // Validate API key format (OpenAI keys start with 'sk-')\n    if (!process.env.OPENAI_API_KEY.startsWith(\"sk-\")) {\n        return {\n            isValid: false,\n            error: 'OPENAI_API_KEY appears to be invalid (should start with \"sk-\")'\n        };\n    }\n    // Validate optional numeric environment variables\n    if (process.env.OPENAI_TEMPERATURE) {\n        const temp = parseFloat(process.env.OPENAI_TEMPERATURE);\n        if (isNaN(temp) || temp < 0 || temp > 2) {\n            return {\n                isValid: false,\n                error: \"OPENAI_TEMPERATURE must be a number between 0 and 2\"\n            };\n        }\n    }\n    if (process.env.OPENAI_MAX_TOKENS) {\n        const maxTokens = parseInt(process.env.OPENAI_MAX_TOKENS);\n        if (isNaN(maxTokens) || maxTokens < 1 || maxTokens > 4096) {\n            return {\n                isValid: false,\n                error: \"OPENAI_MAX_TOKENS must be a number between 1 and 4096\"\n            };\n        }\n    }\n    // Check for production-specific requirements\n    const currentEnv = getCurrentEnvironment();\n    if (currentEnv === \"production\") {\n        if (!process.env.NEXT_PUBLIC_APP_NAME) {\n            warnings.push(\"NEXT_PUBLIC_APP_NAME is not set for production\");\n        }\n        // In production, recommend more conservative settings\n        const config = getOpenAIConfig();\n        if (config.temperature > 0.8) {\n            warnings.push(\"Consider using lower temperature (≤0.8) in production for more consistent responses\");\n        }\n    }\n    return {\n        isValid: true,\n        warnings: warnings.length > 0 ? warnings : undefined\n    };\n}\n/**\r\n * Gets OpenAI configuration from environment variables with environment-specific fallbacks\r\n */ function getOpenAIConfig() {\n    const currentEnv = getCurrentEnvironment();\n    const defaults = DEFAULT_OPENAI_CONFIG[currentEnv];\n    return {\n        model: process.env.OPENAI_MODEL || defaults.model,\n        temperature: process.env.OPENAI_TEMPERATURE ? parseFloat(process.env.OPENAI_TEMPERATURE) : defaults.temperature,\n        maxTokens: process.env.OPENAI_MAX_TOKENS ? parseInt(process.env.OPENAI_MAX_TOKENS) : defaults.maxTokens\n    };\n}\n/**\r\n * Logs environment configuration (without sensitive data) for debugging\r\n */ function logEnvironmentInfo() {\n    const currentEnv = getCurrentEnvironment();\n    const config = getOpenAIConfig();\n    console.log(`Environment: ${currentEnv}`);\n    console.log(`OpenAI Model: ${config.model}`);\n    console.log(`Temperature: ${config.temperature}`);\n    console.log(`Max Tokens: ${config.maxTokens}`);\n    console.log(`API Key configured: ${process.env.OPENAI_API_KEY ? \"Yes\" : \"No\"}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkIsS0FBSyxDQUFDLENBQUM7SUFDM0M4QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUVSLE9BQU90QixXQUFXLENBQUMsQ0FBQztJQUNoRDZCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRVIsT0FBT3JCLFNBQVMsQ0FBQyxDQUFDO0lBQzdDNEIsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUV0QixRQUFRSCxHQUFHLENBQUNJLGNBQWMsR0FBRyxRQUFRLEtBQUssQ0FBQztBQUNoRiIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haS1maXJlYmFzZS1jaGF0Ym90Ly4vc3JjL2xpYi9vcGVuYWktY29uZmlnLnRzPzJmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJQ29uZmlnIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG4vKipcclxuICogRW52aXJvbm1lbnQgdHlwZXMgZm9yIGRpZmZlcmVudCBkZXBsb3ltZW50IHN0YWdlc1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgRW52aXJvbm1lbnQgPSAnZGV2ZWxvcG1lbnQnIHwgJ3Byb2R1Y3Rpb24nIHwgJ3Rlc3QnO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgT3BlbkFJIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgYnkgZW52aXJvbm1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9DT05GSUc6IFJlY29yZDxFbnZpcm9ubWVudCwgT3BlbkFJQ29uZmlnPiA9IHtcclxuICBkZXZlbG9wbWVudDoge1xyXG4gICAgbW9kZWw6ICdncHQtMy41LXR1cmJvJyxcclxuICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICBtYXhUb2tlbnM6IDE1MCxcclxuICB9LFxyXG4gIHByb2R1Y3Rpb246IHtcclxuICAgIG1vZGVsOiAnZ3B0LTMuNS10dXJibycsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC41LFxyXG4gICAgbWF4VG9rZW5zOiAyMDAsXHJcbiAgfSxcclxuICB0ZXN0OiB7XHJcbiAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxyXG4gICAgdGVtcGVyYXR1cmU6IDAuMSxcclxuICAgIG1heFRva2VuczogNTAsXHJcbiAgfSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBjdXJyZW50IGVudmlyb25tZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudEVudmlyb25tZW50KCk6IEVudmlyb25tZW50IHtcclxuICBjb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcclxuICBpZiAoZW52ID09PSAncHJvZHVjdGlvbicpIHJldHVybiAncHJvZHVjdGlvbic7XHJcbiAgaWYgKGVudiA9PT0gJ3Rlc3QnKSByZXR1cm4gJ3Rlc3QnO1xyXG4gIHJldHVybiAnZGV2ZWxvcG1lbnQnO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBwcmVzZW50IGFuZCBwcm9wZXJseSBmb3JtYXR0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUVudmlyb25tZW50KCk6IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IHdhcm5pbmdzPzogc3RyaW5nW10gfSB7XHJcbiAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgXHJcbiAgLy8gQ2hlY2sgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnT1BFTkFJX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIEFQSSBrZXkgZm9ybWF0IChPcGVuQUkga2V5cyBzdGFydCB3aXRoICdzay0nKVxyXG4gIGlmICghcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkuc3RhcnRzV2l0aCgnc2stJykpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogJ09QRU5BSV9BUElfS0VZIGFwcGVhcnMgdG8gYmUgaW52YWxpZCAoc2hvdWxkIHN0YXJ0IHdpdGggXCJzay1cIiknLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFZhbGlkYXRlIG9wdGlvbmFsIG51bWVyaWMgZW52aXJvbm1lbnQgdmFyaWFibGVzXHJcbiAgaWYgKHByb2Nlc3MuZW52Lk9QRU5BSV9URU1QRVJBVFVSRSkge1xyXG4gICAgY29uc3QgdGVtcCA9IHBhcnNlRmxvYXQocHJvY2Vzcy5lbnYuT1BFTkFJX1RFTVBFUkFUVVJFKTtcclxuICAgIGlmIChpc05hTih0ZW1wKSB8fCB0ZW1wIDwgMCB8fCB0ZW1wID4gMikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnT1BFTkFJX1RFTVBFUkFUVVJFIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAyJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChwcm9jZXNzLmVudi5PUEVOQUlfTUFYX1RPS0VOUykge1xyXG4gICAgY29uc3QgbWF4VG9rZW5zID0gcGFyc2VJbnQocHJvY2Vzcy5lbnYuT1BFTkFJX01BWF9UT0tFTlMpO1xyXG4gICAgaWYgKGlzTmFOKG1heFRva2VucykgfHwgbWF4VG9rZW5zIDwgMSB8fCBtYXhUb2tlbnMgPiA0MDk2KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdPUEVOQUlfTUFYX1RPS0VOUyBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gMSBhbmQgNDA5NicsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBmb3IgcHJvZHVjdGlvbi1zcGVjaWZpYyByZXF1aXJlbWVudHNcclxuICBjb25zdCBjdXJyZW50RW52ID0gZ2V0Q3VycmVudEVudmlyb25tZW50KCk7XHJcbiAgaWYgKGN1cnJlbnRFbnYgPT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfTkFNRSkge1xyXG4gICAgICB3YXJuaW5ncy5wdXNoKCdORVhUX1BVQkxJQ19BUFBfTkFNRSBpcyBub3Qgc2V0IGZvciBwcm9kdWN0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHJlY29tbWVuZCBtb3JlIGNvbnNlcnZhdGl2ZSBzZXR0aW5nc1xyXG4gICAgY29uc3QgY29uZmlnID0gZ2V0T3BlbkFJQ29uZmlnKCk7XHJcbiAgICBpZiAoY29uZmlnLnRlbXBlcmF0dXJlID4gMC44KSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goJ0NvbnNpZGVyIHVzaW5nIGxvd2VyIHRlbXBlcmF0dXJlICjiiaQwLjgpIGluIHByb2R1Y3Rpb24gZm9yIG1vcmUgY29uc2lzdGVudCByZXNwb25zZXMnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7IFxyXG4gICAgaXNWYWxpZDogdHJ1ZSwgXHJcbiAgICB3YXJuaW5nczogd2FybmluZ3MubGVuZ3RoID4gMCA/IHdhcm5pbmdzIDogdW5kZWZpbmVkIFxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIE9wZW5BSSBjb25maWd1cmF0aW9uIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggZW52aXJvbm1lbnQtc3BlY2lmaWMgZmFsbGJhY2tzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlbkFJQ29uZmlnKCk6IE9wZW5BSUNvbmZpZyB7XHJcbiAgY29uc3QgY3VycmVudEVudiA9IGdldEN1cnJlbnRFbnZpcm9ubWVudCgpO1xyXG4gIGNvbnN0IGRlZmF1bHRzID0gREVGQVVMVF9PUEVOQUlfQ09ORklHW2N1cnJlbnRFbnZdO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbW9kZWw6IHByb2Nlc3MuZW52Lk9QRU5BSV9NT0RFTCB8fCBkZWZhdWx0cy5tb2RlbCxcclxuICAgIHRlbXBlcmF0dXJlOiBwcm9jZXNzLmVudi5PUEVOQUlfVEVNUEVSQVRVUkUgXHJcbiAgICAgID8gcGFyc2VGbG9hdChwcm9jZXNzLmVudi5PUEVOQUlfVEVNUEVSQVRVUkUpIFxyXG4gICAgICA6IGRlZmF1bHRzLnRlbXBlcmF0dXJlLFxyXG4gICAgbWF4VG9rZW5zOiBwcm9jZXNzLmVudi5PUEVOQUlfTUFYX1RPS0VOUyBcclxuICAgICAgPyBwYXJzZUludChwcm9jZXNzLmVudi5PUEVOQUlfTUFYX1RPS0VOUykgXHJcbiAgICAgIDogZGVmYXVsdHMubWF4VG9rZW5zLFxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2dzIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24gKHdpdGhvdXQgc2Vuc2l0aXZlIGRhdGEpIGZvciBkZWJ1Z2dpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2dFbnZpcm9ubWVudEluZm8oKTogdm9pZCB7XHJcbiAgY29uc3QgY3VycmVudEVudiA9IGdldEN1cnJlbnRFbnZpcm9ubWVudCgpO1xyXG4gIGNvbnN0IGNvbmZpZyA9IGdldE9wZW5BSUNvbmZpZygpO1xyXG4gIFxyXG4gIGNvbnNvbGUubG9nKGBFbnZpcm9ubWVudDogJHtjdXJyZW50RW52fWApO1xyXG4gIGNvbnNvbGUubG9nKGBPcGVuQUkgTW9kZWw6ICR7Y29uZmlnLm1vZGVsfWApO1xyXG4gIGNvbnNvbGUubG9nKGBUZW1wZXJhdHVyZTogJHtjb25maWcudGVtcGVyYXR1cmV9YCk7XHJcbiAgY29uc29sZS5sb2coYE1heCBUb2tlbnM6ICR7Y29uZmlnLm1heFRva2Vuc31gKTtcclxuICBjb25zb2xlLmxvZyhgQVBJIEtleSBjb25maWd1cmVkOiAke3Byb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZID8gJ1llcycgOiAnTm8nfWApO1xyXG59Il0sIm5hbWVzIjpbIkRFRkFVTFRfT1BFTkFJX0NPTkZJRyIsImRldmVsb3BtZW50IiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsInByb2R1Y3Rpb24iLCJ0ZXN0IiwiZ2V0Q3VycmVudEVudmlyb25tZW50IiwiZW52IiwidmFsaWRhdGVFbnZpcm9ubWVudCIsIndhcm5pbmdzIiwicHJvY2VzcyIsIk9QRU5BSV9BUElfS0VZIiwiaXNWYWxpZCIsImVycm9yIiwic3RhcnRzV2l0aCIsIk9QRU5BSV9URU1QRVJBVFVSRSIsInRlbXAiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJPUEVOQUlfTUFYX1RPS0VOUyIsInBhcnNlSW50IiwiY3VycmVudEVudiIsIk5FWFRfUFVCTElDX0FQUF9OQU1FIiwicHVzaCIsImNvbmZpZyIsImdldE9wZW5BSUNvbmZpZyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRlZmF1bHRzIiwiT1BFTkFJX01PREVMIiwibG9nRW52aXJvbm1lbnRJbmZvIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openai-config.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/chat.ts":
/*!***************************!*\
  !*** ./src/types/chat.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorType: () => (/* binding */ ErrorType)\n/* harmony export */ });\n/**\r\n * Core data models and types for the OpenAI Firebase Chatbot\r\n */ /**\r\n * Represents a single message in the chat conversation\r\n */ var ErrorType;\n(function(ErrorType) {\n    ErrorType[\"NETWORK_ERROR\"] = \"network_error\";\n    ErrorType[\"API_ERROR\"] = \"api_error\";\n    ErrorType[\"VALIDATION_ERROR\"] = \"validation_error\";\n    ErrorType[\"RATE_LIMIT_ERROR\"] = \"rate_limit_error\";\n})(ErrorType || (ErrorType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvY2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0NBRUMsR0FFRDs7Q0FFQztVQStCV0E7Ozs7O0dBQUFBLGNBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpLWZpcmViYXNlLWNoYXRib3QvLi9zcmMvdHlwZXMvY2hhdC50cz8xM2UyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb3JlIGRhdGEgbW9kZWxzIGFuZCB0eXBlcyBmb3IgdGhlIE9wZW5BSSBGaXJlYmFzZSBDaGF0Ym90XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBzaW5nbGUgbWVzc2FnZSBpbiB0aGUgY2hhdCBjb252ZXJzYXRpb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgdGltZXN0YW1wOiBEYXRlO1xyXG59XHJcblxyXG4vKipcclxuICogTWFuYWdlcyB0aGUgb3ZlcmFsbCBzdGF0ZSBvZiB0aGUgY2hhdCBjb252ZXJzYXRpb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdFN0YXRlIHtcclxuICBtZXNzYWdlczogTWVzc2FnZVtdO1xyXG4gIGlzTG9hZGluZzogYm9vbGVhbjtcclxuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcclxuICBlcnJvclR5cGU/OiBFcnJvclR5cGU7XHJcbiAgcmV0cnlDb3VudD86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgT3BlbkFJIEFQSSBpbnRlZ3JhdGlvblxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPcGVuQUlDb25maWcge1xyXG4gIG1vZGVsOiBzdHJpbmc7IC8vIGRlZmF1bHQ6ICdncHQtMy41LXR1cmJvJ1xyXG4gIHRlbXBlcmF0dXJlOiBudW1iZXI7IC8vIGRlZmF1bHQ6IDAuN1xyXG4gIG1heFRva2VuczogbnVtYmVyOyAvLyBkZWZhdWx0OiAxNTBcclxufVxyXG5cclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHBvc3NpYmxlIGVycm9yIHR5cGVzIGluIHRoZSBhcHBsaWNhdGlvblxyXG4gKi9cclxuZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcclxuICBORVRXT1JLX0VSUk9SID0gJ25ldHdvcmtfZXJyb3InLFxyXG4gIEFQSV9FUlJPUiA9ICdhcGlfZXJyb3InLFxyXG4gIFZBTElEQVRJT05fRVJST1IgPSAndmFsaWRhdGlvbl9lcnJvcicsXHJcbiAgUkFURV9MSU1JVF9FUlJPUiA9ICdyYXRlX2xpbWl0X2Vycm9yJ1xyXG59Il0sIm5hbWVzIjpbIkVycm9yVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/types/chat.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/index.ts":
/*!****************************!*\
  !*** ./src/types/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorType: () => (/* reexport safe */ _chat__WEBPACK_IMPORTED_MODULE_0__.ErrorType)\n/* harmony export */ });\n/* harmony import */ var _chat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat */ \"(rsc)/./src/types/chat.ts\");\n/**\r\n * Export all types for the OpenAI Firebase Chatbot\r\n */ \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Q0FFQyxHQUdrQyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haS1maXJlYmFzZS1jaGF0Ym90Ly4vc3JjL3R5cGVzL2luZGV4LnRzPzQ0MTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEV4cG9ydCBhbGwgdHlwZXMgZm9yIHRoZSBPcGVuQUkgRmlyZWJhc2UgQ2hhdGJvdFxyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIHsgTWVzc2FnZSwgQ2hhdFN0YXRlLCBPcGVuQUlDb25maWcgfSBmcm9tICcuL2NoYXQnO1xyXG5leHBvcnQgeyBFcnJvclR5cGUgfSBmcm9tICcuL2NoYXQnOyJdLCJuYW1lcyI6WyJFcnJvclR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/types/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/openai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbeavi%5CDocuments%5CProgramming%5CDenarii%5Cdenarii-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();