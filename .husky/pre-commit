#!/bin/sh

# Check for exposed API keys (more specific patterns)
if git diff --cached --name-only | xargs grep -E "(AIza[a-zA-Z0-9_-]{35}|sk-[a-zA-Z0-9_-]{20,})" 2>/dev/null; then
  echo "❌ Potential API key detected in commit!"
  echo "Please remove sensitive data before committing."
  exit 1
fi

# Ensure .next is not being committed
if git diff --cached --name-only | grep -q "^\.next/"; then
  echo "❌ .next folder should not be committed!"
  exit 1
fi

# Ensure .env.local is not being committed
if git diff --cached --name-only | grep -q "\.env\.local"; then
  echo "❌ .env.local should not be committed!"
  exit 1
fi