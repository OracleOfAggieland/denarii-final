<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Browser Compatibility Test - Purple Theme</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'purple-primary': '#6366f1',
                        'purple-secondary': '#8b5cf6',
                    },
                    backgroundImage: {
                        'purple-gradient': 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)',
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                        'message': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
                    },
                }
            }
        }
    </script>
    <style>
        .test-result {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
        }
        .test-pass { background-color: #d1fae5; color: #065f46; }
        .test-fail { background-color: #fee2e2; color: #991b1b; }
        .test-info { background-color: #dbeafe; color: #1e40af; }
    </style>
</head>
<body class="min-h-screen bg-slate-50">
    <!-- Test Layout - Mimics the actual chatbot interface -->
    <main class="min-h-screen bg-slate-50">
        <!-- Header with purple gradient background -->
        <header class="bg-gradient-to-r from-indigo-500 to-violet-400 shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-xl sm:text-2xl font-bold text-white">
                            Cross-Browser Compatibility Test
                        </h1>
                    </div>
                    <div class="hidden sm:flex items-center text-sm text-white/80">
                        Purple Theme Test
                    </div>
                </div>
            </div>
        </header>

        <!-- Main chat container with enhanced card styling -->
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
            <div class="bg-white rounded-xl shadow-xl border border-gray-100 min-h-[500px]">
                <!-- Test Results Panel -->
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">Browser Compatibility Test Results</h2>
                    <div id="test-results"></div>
                </div>

                <!-- Mock Chat Interface -->
                <div class="flex flex-col h-96">
                    <!-- Mock Messages -->
                    <div class="flex-1 overflow-y-auto p-4 space-y-4">
                        <!-- User Message -->
                        <div class="flex justify-end">
                            <div class="max-w-[80%] rounded-xl px-4 py-3 shadow-sm bg-indigo-500 text-white ml-4">
                                <div class="whitespace-pre-wrap break-words">
                                    This is a test user message with purple background
                                </div>
                                <div class="text-xs mt-1 text-indigo-100">
                                    12:34 PM
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Message -->
                        <div class="flex justify-start">
                            <div class="max-w-[80%] rounded-xl px-4 py-3 shadow-sm bg-slate-100 text-slate-900 mr-4">
                                <div class="whitespace-pre-wrap break-words">
                                    This is a test AI response with gray background
                                </div>
                                <div class="text-xs mt-1 text-slate-500">
                                    12:35 PM
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mock Input -->
                    <div class="flex gap-2 p-4 border-t bg-white">
                        <textarea
                            placeholder="Type your message..."
                            rows="1"
                            class="flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            style="min-height: 40px; max-height: 120px;"
                        ></textarea>
                        <button
                            type="button"
                            class="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"
                        >
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        class CrossBrowserTester {
            constructor() {
                this.results = [];
                this.resultsContainer = document.getElementById('test-results');
            }

            addResult(test, status, message) {
                this.results.push({ test, status, message });
                this.updateDisplay();
            }

            updateDisplay() {
                this.resultsContainer.innerHTML = this.results.map(result => {
                    const className = result.status === 'pass' ? 'test-pass' : 
                                    result.status === 'fail' ? 'test-fail' : 'test-info';
                    const icon = result.status === 'pass' ? '✅' : 
                               result.status === 'fail' ? '❌' : 'ℹ️';
                    return `<div class="test-result ${className}">${icon} ${result.test}: ${result.message}</div>`;
                }).join('');
            }

            testBrowserInfo() {
                const userAgent = navigator.userAgent;
                let browser = 'Unknown';
                
                if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) {
                    browser = 'Chrome';
                } else if (userAgent.includes('Firefox')) {
                    browser = 'Firefox';
                } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {
                    browser = 'Safari';
                } else if (userAgent.includes('Edg')) {
                    browser = 'Edge';
                } else if (userAgent.includes('Opera')) {
                    browser = 'Opera';
                }

                this.addResult('Browser Detection', 'info', `${browser} detected`);
                return browser;
            }

            testGradientSupport() {
                const testElement = document.createElement('div');
                testElement.style.background = 'linear-gradient(to right, #6366f1, #8b5cf6)';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const backgroundImage = computedStyle.backgroundImage;
                
                document.body.removeChild(testElement);
                
                const supportsGradient = backgroundImage.includes('linear-gradient') || 
                                       backgroundImage.includes('gradient');
                
                this.addResult(
                    'CSS Gradient Support',
                    supportsGradient ? 'pass' : 'fail',
                    supportsGradient ? 'Linear gradients supported' : 'Linear gradients not supported'
                );
                
                return supportsGradient;
            }

            testFlexboxSupport() {
                const testElement = document.createElement('div');
                testElement.style.display = 'flex';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const display = computedStyle.display;
                
                document.body.removeChild(testElement);
                
                const supportsFlexbox = display === 'flex';
                
                this.addResult(
                    'Flexbox Support',
                    supportsFlexbox ? 'pass' : 'fail',
                    supportsFlexbox ? 'Flexbox supported' : 'Flexbox not supported'
                );
                
                return supportsFlexbox;
            }

            testBoxShadowSupport() {
                const testElement = document.createElement('div');
                testElement.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1)';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const boxShadow = computedStyle.boxShadow;
                
                document.body.removeChild(testElement);
                
                const supportsBoxShadow = boxShadow !== 'none' && boxShadow !== '';
                
                this.addResult(
                    'Box Shadow Support',
                    supportsBoxShadow ? 'pass' : 'fail',
                    supportsBoxShadow ? 'Box shadows supported' : 'Box shadows not supported'
                );
                
                return supportsBoxShadow;
            }

            testBorderRadiusSupport() {
                const testElement = document.createElement('div');
                testElement.style.borderRadius = '12px';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const borderRadius = computedStyle.borderRadius;
                
                document.body.removeChild(testElement);
                
                const supportsBorderRadius = borderRadius === '12px';
                
                this.addResult(
                    'Border Radius Support',
                    supportsBorderRadius ? 'pass' : 'fail',
                    supportsBorderRadius ? 'Border radius supported' : 'Border radius not supported'
                );
                
                return supportsBorderRadius;
            }

            testResponsiveDesign() {
                const viewport = {
                    width: window.innerWidth,
                    height: window.innerHeight
                };
                
                let deviceType = 'desktop';
                if (viewport.width <= 768) {
                    deviceType = 'mobile';
                } else if (viewport.width <= 1024) {
                    deviceType = 'tablet';
                }
                
                this.addResult(
                    'Viewport Detection',
                    'info',
                    `${viewport.width}x${viewport.height} (${deviceType})`
                );
                
                // Test if responsive classes are working
                const header = document.querySelector('header h1');
                if (header) {
                    const computedStyle = window.getComputedStyle(header);
                    const fontSize = computedStyle.fontSize;
                    
                    this.addResult(
                        'Responsive Typography',
                        'pass',
                        `Header font size: ${fontSize}`
                    );
                }
                
                return true;
            }

            testColorSupport() {
                const testElement = document.createElement('div');
                testElement.style.backgroundColor = '#6366f1';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const backgroundColor = computedStyle.backgroundColor;
                
                document.body.removeChild(testElement);
                
                const supportsColor = backgroundColor.includes('99, 102, 241') || 
                                    backgroundColor.includes('#6366f1');
                
                this.addResult(
                    'Color Support',
                    supportsColor ? 'pass' : 'fail',
                    supportsColor ? 'Purple colors rendered correctly' : 'Color rendering issues detected'
                );
                
                return supportsColor;
            }

            testTransitionSupport() {
                const testElement = document.createElement('div');
                testElement.style.transition = 'all 0.3s ease';
                document.body.appendChild(testElement);
                
                const computedStyle = window.getComputedStyle(testElement);
                const transition = computedStyle.transition;
                
                document.body.removeChild(testElement);
                
                const supportsTransition = transition.includes('0.3s') || transition !== 'all 0s ease 0s';
                
                this.addResult(
                    'CSS Transitions',
                    supportsTransition ? 'pass' : 'fail',
                    supportsTransition ? 'CSS transitions supported' : 'CSS transitions not supported'
                );
                
                return supportsTransition;
            }

            runAllTests() {
                this.addResult('Test Suite', 'info', 'Starting cross-browser compatibility tests...');
                
                const browser = this.testBrowserInfo();
                const gradientSupport = this.testGradientSupport();
                const flexboxSupport = this.testFlexboxSupport();
                const boxShadowSupport = this.testBoxShadowSupport();
                const borderRadiusSupport = this.testBorderRadiusSupport();
                const colorSupport = this.testColorSupport();
                const transitionSupport = this.testTransitionSupport();
                const responsiveSupport = this.testResponsiveDesign();
                
                // Calculate overall compatibility
                const tests = [
                    gradientSupport,
                    flexboxSupport,
                    boxShadowSupport,
                    borderRadiusSupport,
                    colorSupport,
                    transitionSupport,
                    responsiveSupport
                ];
                
                const passedTests = tests.filter(test => test).length;
                const totalTests = tests.length;
                const compatibilityScore = Math.round((passedTests / totalTests) * 100);
                
                this.addResult(
                    'Overall Compatibility',
                    compatibilityScore >= 90 ? 'pass' : compatibilityScore >= 70 ? 'info' : 'fail',
                    `${compatibilityScore}% compatible (${passedTests}/${totalTests} features supported)`
                );
                
                return {
                    browser,
                    compatibilityScore,
                    passedTests,
                    totalTests
                };
            }
        }

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            const tester = new CrossBrowserTester();
            const results = tester.runAllTests();
            
            console.log('Cross-browser compatibility test results:', results);
        });

        // Test responsive behavior on window resize
        window.addEventListener('resize', () => {
            setTimeout(() => {
                const tester = new CrossBrowserTester();
                tester.testResponsiveDesign();
            }, 100);
        });
    </script>
</body>
</html>