(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3446:function(e,t,r){Promise.resolve().then(r.bind(r,410))},410:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s,o,n=r(7437),l=r(2265);function a(e){let{messages:t}=e,r=(0,l.useRef)(null);return((0,l.useEffect)(()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),0===t.length)?(0,n.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"text-center text-gray-500",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCAC"}),(0,n.jsx)("p",{className:"text-lg",children:"Start a conversation!"}),(0,n.jsx)("p",{className:"text-sm",children:"Type a message below to begin chatting."})]})}):(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(e=>(0,n.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,n.jsxs)("div",{className:"max-w-[80%] rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-blue-500 text-white ml-4":"bg-gray-100 text-gray-900 mr-4"),children:[(0,n.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,n.jsx)("div",{className:"text-xs mt-1 ".concat("user"===e.role?"text-blue-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,n.jsx)("div",{ref:r})]})}function i(e){let{onSendMessage:t,isLoading:r}=e,[s,o]=(0,l.useState)("");return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=s.trim();r&&(t(r),o(""))},className:"flex gap-2 p-4 border-t bg-white",children:[(0,n.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let n=s.trim();n&&!r&&(t(n),o(""))}},placeholder:"Type your message...",disabled:r,rows:1,className:"flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",style:{minHeight:"40px",maxHeight:"120px"}}),(0,n.jsx)("button",{type:"submit",disabled:r||!s.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:r?"Sending...":"Send"})]})}function c(e){let{error:t,onClear:r,onRetry:s}=e;if(!t)return null;let l=function(e){switch(e){case o.NETWORK_ERROR:return{bgColor:"bg-orange-50",borderColor:"border-orange-400",iconColor:"text-orange-400",textColor:"text-orange-700",showRetry:!0};case o.RATE_LIMIT_ERROR:return{bgColor:"bg-yellow-50",borderColor:"border-yellow-400",iconColor:"text-yellow-400",textColor:"text-yellow-700",showRetry:!0};case o.VALIDATION_ERROR:return{bgColor:"bg-blue-50",borderColor:"border-blue-400",iconColor:"text-blue-400",textColor:"text-blue-700",showRetry:!0};default:return{bgColor:"bg-red-50",borderColor:"border-red-400",iconColor:"text-red-400",textColor:"text-red-700",showRetry:!0}}}(t.type);return(0,n.jsx)("div",{className:"".concat(l.bgColor," border-l-4 ").concat(l.borderColor," p-4 m-4 rounded"),children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(u,{type:t.type,className:"h-5 w-5 ".concat(l.iconColor)})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("p",{className:"text-sm ".concat(l.textColor),children:t.message}),l.showRetry&&(0,n.jsx)("button",{onClick:s,className:"mt-2 text-xs ".concat(l.textColor," hover:underline font-medium"),children:"Try Again"})]})]}),(0,n.jsx)("button",{onClick:r,className:"".concat(l.iconColor," hover:opacity-75"),children:(0,n.jsx)(d,{className:"h-5 w-5"})})]})})}function u(e){let{type:t,className:r}=e;return t===o.NETWORK_ERROR?(0,n.jsx)("svg",{className:r,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})}):(0,n.jsx)("svg",{className:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}function d(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}function x(e){let{isLoading:t}=e;return t?(0,n.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 m-4 rounded",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsx)("p",{className:"text-sm text-blue-700",children:"AI is thinking..."})})]})}):null}function m(){let[e,t]=(0,l.useState)([]),{sendMessage:r,isLoading:s,error:u,clearError:d,retry:m}=function(){let[e,t]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[n,a]=(0,l.useState)(null),i=(0,l.useCallback)(()=>{s(null)},[]),c=(0,l.useCallback)(async(e,r)=>{var n;a({message:e,history:r}),t(!0),s(null);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,conversationHistory:r.map(e=>({role:e.role,content:e.content}))})}),s=await t.json();if(!t.ok){let e=s.errorType||(n=t.status,429===n?o.RATE_LIMIT_ERROR:400===n?o.VALIDATION_ERROR:n>=500?o.NETWORK_ERROR:o.API_ERROR),r=Error(s.error||"HTTP error! status: ".concat(t.status));throw r.errorType=e,r.status=t.status,r}if(s.error){let e=Error(s.error);throw e.errorType=s.errorType||o.API_ERROR,e}return s.response}catch(t){let e=t.errorType||("TypeError"===t.name&&t.message.includes("fetch")?o.NETWORK_ERROR:o.API_ERROR);return s({message:function(e,t){switch(t){case o.NETWORK_ERROR:return"Unable to connect to the server. Please check your internet connection.";case o.RATE_LIMIT_ERROR:return"Too many requests sent. Please wait a moment before sending another message.";case o.VALIDATION_ERROR:return"There was an issue with your message. Please try rephrasing and send again.";case o.API_ERROR:default:if(401===e.status)return"Authentication failed. Please contact support.";if(e.status>=500)return"The AI service is temporarily unavailable. Please try again in a few moments.";return e.message||"An unexpected error occurred. Please try again."}}(t,e),type:e}),null}finally{t(!1)}},[]),u=(0,l.useCallback)(async()=>n?await c(n.message,n.history):null,[n,c]);return{sendMessage:c,isLoading:e,error:r,clearError:i,retry:u}}(),f=async s=>{let o={id:Date.now().toString(),role:"user",content:s,timestamp:new Date};t(e=>[...e,o]);let n=await r(s,e);if(n){let e={id:(Date.now()+1).toString(),role:"assistant",content:n,timestamp:new Date};t(t=>[...t,e])}},h=async()=>{let e=await m();if(e){let r={id:(Date.now()+1).toString(),role:"assistant",content:e,timestamp:new Date};t(e=>[...e,r])}};return(0,n.jsxs)("div",{className:"flex flex-col h-full bg-gray-50",children:[(0,n.jsx)(c,{error:u,onClear:d,onRetry:h}),(0,n.jsx)(x,{isLoading:s}),(0,n.jsx)(a,{messages:e}),(0,n.jsx)(i,{onSendMessage:f,isLoading:s})]})}(s=o||(o={})).NETWORK_ERROR="network_error",s.API_ERROR="api_error",s.VALIDATION_ERROR="validation_error",s.RATE_LIMIT_ERROR="rate_limit_error"},622:function(e,t,r){"use strict";var s=r(2265),o=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(e,t,r){var s,i={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)n.call(t,s)&&!a.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:l.current}}t.jsx=i,t.jsxs=i},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=3446)}),_N_E=e.O()}]);